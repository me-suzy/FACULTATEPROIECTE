
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=20//-->
<!--PAGES=514-516//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="20-07.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="20-09.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P><FONT SIZE="+1"><B><I>Message Subclasses</I></B></FONT></P>
<P>The Message interface does not define any body for the message. Instead, the JMS specification defines five subtypes of Message. These subtypes support various message body types. Although a provider is expected to support all of the types, it may have optimized one type over the others based on its underlying implementation. See the documentation for your provider to find out these specifics. The available subtypes are:
</P>
<DL>
<DD><B>&#149;</B>&nbsp;&nbsp;<B>StreamMessage.</B> A message that uses a stream representation for its body. The stream holds a self-describing sequence of Java objects and primitive values.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>MapMessage.</B> A message that stores key-value pairs.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>TextMessage.</B> A message that provides a single string for its message body.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>ObjectMessage.</B> A message that provides a single serialized object as its message body. The type of this object is arbitrary.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>BytesMessage.</B> A message that represents a stream of bytes. This type is used primarily for accessing legacy messaging systems and applications. As a result, some providers may prohibit the user of properties with a BytesMessage.
</DL>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>MiniJMS does not fully support the Stream and Bytes message types.
</FONT><HR>
</BLOCKQUOTE>
<P>Like the message properties, the messages that take multiple values&#151;StreamMessage and MapMessage&#151;can convert between some value types. These conversions are listed in Table 20.9. As before, items written with the type in column one can be read as the type in the columns with an X.
</P>
<P>Both the Stream and Bytes messages provide methods for accessing these values sequentially. For example, the method getInt() is used to read the value in the message body as an int. Because these two message types are read sequentially, they also provide the method:</P>
<!-- CODE SNIP //-->
<PRE>
public void reset() throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>to send the cursor back to the beginning of the body.
</P>
<P>The MapMessage type provides methods for accessing values by key. For example, the method:</P>
<!-- CODE SNIP //-->
<PRE>
public int getInt(String name) throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>is used to access an integer value. Similar methods are provided for writing:
</P>
<!-- CODE SNIP //-->
<PRE>
public void setChar(java.lang.String name, char value)
throws MessageNotWriteableException, JMSException
</PRE>
<!-- END CODE SNIP //-->
<TABLE WIDTH="100%">
<TR>
<TD CAPTION ALIGN="LEFT" COLSPAN="10"><B>Table 20.9</B> Message Body Type Conversions
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">BOOLEAN
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">BYTE
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">SHORT
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">INT
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">LONG
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">FLOAT
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">DOUBLE
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">STRING
<TH VALIGN="TOP" WIDTH="10%" ALIGN="LEFT">BYTE[]
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">boolean
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">byte
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">short
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">int
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">long
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">float
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">double
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">String
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">byte[]
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">
<TD VALIGN="TOP" ALIGN="LEFT">X
<TR>
<TD COLSPAN="10"><HR>
</TABLE>
<P>Many of the methods for changing a Message&#146;s body can MessageNotWritableException or a MessageNotReadableException if the message has been placed in a read-only or write-only state by the JMS provider:
</P>
<P>The TextMessage interface defines the methods:</P>
<!-- CODE SNIP //-->
<PRE>
public void setText(String string) throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>and
</P>
<!-- CODE SNIP //-->
<PRE>
public String getText() throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>for assigning the body. In the same manner, the ObjectMessage defines the methods:
</P>
<!-- CODE SNIP //-->
<PRE>
public void setObject(Serializable object) throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>and
</P>
<!-- CODE SNIP //-->
<PRE>
public Serializable getObject() throws JMSException
</PRE>
<!-- END CODE SNIP //-->
<P>for accessing its body.
</P>
<P>As you can see, there are a variety of message types and ways to assign their contents. Check the JMS documentation for each type to learn the specifics for that type and the messages it provides.</P>
<H4 ALIGN="LEFT"><A NAME="Heading13"></A><FONT COLOR="#000077">Message Selectors</FONT></H4>
<P>In an enterprise environment, many messages may often be created for a particular destination. Some clients may not require notification of all messages. In fact, clients may want to restrict delivery of some messages to improve performance and reduce network traffic. To support message filtering, JMS defines the concept of a message selector. This selector can be used by a consumer to prevent delivery of certain messages. For example, an administrator might ignore log messages that have a &#147;green&#148; state and view only messages in a &#147;yellow&#148; or &#147;red&#148; state.
</P>
<P>A message selector is essentially an SQL92 with a clause that references the header or property fields in a message. The selector cannot reference the contents of the message. To make reading selectors easier, all of the predefined literals and key words are in all uppercase.</P>
<P>Selectors can contain four types of information:</P>
<DL>
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Literals.</B> Strings, numbers, TRUE, or FALSE. These are constant values used in comparisons and other expressions. Strings should appear in single quotes.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Identifiers.</B> Names of properties or header fields.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Whitespace.</B> Spaces, tabs, form feeds, or line terminators.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Expressions.</B> Comparisons, arithmetic operations, and groupings of these operations.
</DL>
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="20-07.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="20-09.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 