
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=05//-->
<!--PAGES=086-088//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="05-02.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="05-04.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<!-- CODE //-->
<PRE>
    static public Context getInitialContext(String[] args) throws
      Exception
    {
        <B>Properties p = new Properties();</B>
        String url = &#147;t3://localhost:7001&#148;;
        String user=null;
        String password=null;
    
        if ((args != null) &amp&amp (args.length &gt 1)) 
        {
            for (int i = 0; i &lt args.length; i&#43;&#43;)
            {
                if (args[i].equals(&#147;-url&#148;)) 
                    url = args[&#43;&#43;i];
                else if (args[i].equals(&#147;-user&#148;)) 
                    user = args[&#43;&#43;i];
                else if (args[i].equals(&#147;-password&#148;)) 
                    password = args[&#43;&#43;i];
                else if (args[i].equals(&#147;-start&#148;)) 
                    start = Long.parseLong(args[&#43;&#43;i]);
                else if (args[i].equals(&#147;-max&#148;)) 
                    max = Integer.parseInt(args[&#43;&#43;i]);
            }
        }
    
        <B>p.put(Context.INITIAL_CONTEXT_FACTORY,
                &#147;weblogic.jndi.T3InitialContextFactory&#148;);</B>
    
        <B>p.put(Context.PROVIDER_URL, url);</B>
    
        if (user != null)
        {
            <B>p.put(Context.SECURITY_PRINCIPAL, user);</B>
    
            if (password == null) password = &#147;&#148;;
        
            <B>p.put(Context.SECURITY_CREDENTIALS, password);</B>
        } 
    
        <B>return new InitialContext(p);</B>
    }
</PRE>
<!-- END CODE //-->
<P>Once a context has been defined, it can be accessed using methods defined in the Context interface. These methods allow you to perform several operations, including listing the contents of a context or searching for a specific entry in the context.
</P>
<P><FONT SIZE="+1"><B><I>List and Search a Context</I></B></FONT></P>
<P>The Context interface defines several methods for searching for objects in a naming or directory service. Table 5.2 lists the searching methods provided by a context. These methods allow you to retrieve any type of object located by a naming service, provided the provider can access it. The fsContext provider locates files and maps them to java.io.File. It locates directories and maps them to contexts that can, in turn, be accessed.
</P>
<TABLE WIDTH="100%"><TD CAPTION COLSPAN="2"><B>Table 5.2</B> Search Methods of Context
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH WIDTH="35%" VALIGN="TOP" ALIGN="LEFT">METHOD 
<TH WIDTH="45%" VALIGN="TOP" ALIGN="LEFT">USE
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>list(Name),list(String)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Returns a NamingEnumeration of the names and the class names of their bound objects in the named context.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>listBindings(Name),listBindings(String)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Returns a NamingEnumeration of the names and their bound objects in the named context.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>lookup(Name),lookup(String)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Retrieves the named object.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>lookupLink(Name),lookupLink(String)</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Retrieves the named object, following links except for the terminal atomic component of name.
<TR>
<TD COLSPAN="2"><HR>
<TR>
</TABLE>
<P>Every method in the Context interface that requires a name as an argument has a version that accepts a String name argument and a version that accepts a Name object. Name is an interface that represents an ordered sequence of zero or more components. Name is used by a context to represent a composite name so that you can name an object with a name that spans multiple namespaces. If you intend to manipulate names or deal with multiple namespaces, this ability is a convenient way of referencing multiple namespaces in a single object. For simple operations with services such as the file system, strings are just as useful.
</P>
<P>For example, given a context, ctx, for the marketing department files, you can view the available reports to print by specifying:</P>
<!-- CODE SNIP //-->
<PRE>
NamingEnumeration ne = ctx.list(&#147;Reports&#148;);
</PRE>
<!-- END CODE SNIP //-->
<P>where the result of calling list is a javax.naming.NamingEnumeration containing the objects in the Reports context.
</P>
<P>NamingEnumeration extends Enumeration to allow exceptions to be thrown after the enumeration. By calling the NamingEnumeration&#146;s hasMore() method instead of the Enumeration method hasMoreElements(), the NamingEnumeration throws an exception when no more elements are available. This allows you to handle exceptions on a list. Suppose you limited the size of a search to 10 elements. If the search returned 11 elements, the exception SizeLimitExceedException would be thrown when you tried to access the 11<SUP>th</SUP> element. The method hasMoreElements() would not throw an exception; it would just return false. A complete list of naming exceptions is shown in Table 5.16 at the end of this chapter.</P>
<P>As you can see in Table 5.2, two mechanisms are provided for searching a context: listing and lookups. <I>Listing</I> returns a list of the items in the context named in the methods argument. In the previous example, the call to list returned all of the objects in the Reports context. The <I>lookup</I> methods return a single object, with the provided name, in the current context.</P>
<P>Listing can be accomplished with one of two methods: list() and listBindings(). The method list() returns a NamingEnumeration containing a list of names and the class names they are bound to. The method listBindings() returns a NamingEnumeration containing a list of names and the objects they are bound to. In each case, you are expected to pass in the name of the context relative to the initial context to search. If you pass in &#147;&#148;, the initial context is listed. Passing in null causes a NullPointerException.</P>
<P>When you perform a list operation on a service, the returned NamingEnumeration consists of NameClassPair instances. Table 5.3 lists the methods of this class. NameClassPair contains an object&#146;s name and the name of the object&#146;s class. Use this information to process the results of a lookup. This is especially handy if you are writing a directory browser because it allows you to get the listing of the names of the files without actually loading all of the objects in the directory.</P>
<P>The listBindings method returns an enumeration of objects of the Binding class. Table 5.4 lists the methods of this object. Binding extends NameClassPair and represents a name to object binding. Although listBindings() provides the same information, it is potentially a much more expensive operation because it actually retrieves the underlying objects. Use list if you only need the name of the object.</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="05-02.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="05-04.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 