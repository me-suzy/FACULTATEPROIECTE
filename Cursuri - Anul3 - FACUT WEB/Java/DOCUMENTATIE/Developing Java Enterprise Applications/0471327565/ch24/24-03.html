
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=24//-->
<!--PAGES=608-612//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="24-02.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="24-04.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H3><A NAME="Heading3"></A><FONT COLOR="#000077">Example Designs</FONT></H3>
<P>The last two chapters of this book describe two large examples. Each example is in excess of 2,500 lines of code and combines several of the technologies described in this book. By including these examples, our intention was to provide a kind of closure to this seminar-style discussion of multiple technologies by bringing the separate examples and concepts together into a larger, unified whole.
</P>
<P>The first large example is an online store that provides a Web front end using servlets and JavaServer Pages. The back end is managed by servlets and an Enterprise JavaBean that stores data with JDBC. The second example is the implementation for our JMS provider called MiniJMS. This JMS provider uses RMI to communicate between the client and server, JBDC to store messages, and JNDI for publishing destinations and factories. The basic design of each example is discussed here, with explanations. The implementations for these examples are discussed in Chapters 25 and 26, respectively.</P>
<H4 ALIGN="LEFT"><A NAME="Heading4"></A><FONT COLOR="#000077">The Online Store</FONT></H4>
<P>The primary goal for the online store example is to demonstrate an application that provides a Web front end and implements some form of business logic in the back end. We chose an online store because it is a familiar concept and lends itself to this primary goal. In our case, our decision regarding what technology to use was driven by two goals: first, to demonstrate the technologies in this book, and second, to demonstrate them in a reasonable way. In other words, we didn&#146;t choose servlets because we had to, we chose them because in a good way they do the job we want done.
</P>
<P>The first requirement for the online store is that it has a Web-based interface. This immediately indicated the use of HTML and probably JHTML or servlets. Leveraging on the design from Chapter 11, &#147;A JavaServer Page Online Store,&#148; we decided to use JavaServer Pages to display a list of categories for the products available at the store and to display the products in each category. The initial page for this example, pictured in Figure 24.1, was updated to include access to the search servlet from Chapter 8, &#147;A Servlet-Based Search Engine.&#148; The decision to use a servlet for searching was an easy one, because we wanted to manage a lot of code for indexing and still provide a Web interface. We could also have used a JSP for searching the front end without a great deal of changes to the code or design. This is one example where we chose a servlet more to distinguish between algorithms and user interface than anything else.</P>
<P>The front page for this store also displays an advertisement. We implemented the code to produce these ads in a servlet so that it could be included in the JSP using a server-side include. The servlet in this example reads a file containing link and image information and uses that information to place linked images on Web pages. The relationship between the servlets and JSPs that make up the front page are shown in Figure 24.2.</P>
<P>Users of the online store can fill up a virtual shopping cart that is managed by a servlet. The choice to use a servlet for this purpose was driven by our desire to demonstrate a larger servlet that displays several types of pages. In this case, the cart can display the cart, an error page, a confirmation page, and a receipt. Another design would have been to use separate servlets, or even JavaServer Pages, for these various interface elements. However, the servlet is also responsible for talking to an Enterprise JavaBean that manages the commercial aspect of the site. By using a single servlet, the JNDI code, and the connection to the bean, home can be kept open between requests.</P>
<P><A NAME="Fig1"></A><A HREF="javascript:displayWindow('images/24-01.jpg',626,689 )"><IMG SRC="images/24-01t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/24-01.jpg',626,689)"><FONT COLOR="#000077"><B>Figure 24.1</B></FONT></A>&nbsp;&nbsp;Online store front page.</P>
<P><A NAME="Fig2"></A><A HREF="javascript:displayWindow('images/24-02.jpg',100,56 )"><IMG SRC="images/24-02t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/24-02.jpg',100,56)"><FONT COLOR="#000077"><B>Figure 24.2</B></FONT></A>&nbsp;&nbsp;Front page components.</P>
<P>Figure 24.3 shows the relationship between the shopping cart servlet and the shopping cart enterprise bean. The bean maintains a connection to a database using JDBC to store purchases and customer information. Although the servlet could have connected directly to the database, we decided to offload the credit and inventory management code from the servlet to an Enterprise JavaBean. This makes it easier to update the commercial implementation of the site without changing the interface code. For example, we could reimplement the EJB to use CyberCash and Oracle Financials rather than a simple two-table database without changing the shopping cart servlets or the JavaServer Pages.
</P>
<P><A NAME="Fig3"></A><A HREF="javascript:displayWindow('images/24-03.jpg',790,491 )"><IMG SRC="images/24-03t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/24-03.jpg',790,491)"><FONT COLOR="#000077"><B>Figure 24.3</B></FONT></A>&nbsp;&nbsp;Shopping cart design.</P>
<P>Overall, the design for the online store demonstrates separation of functionality into components such as the ad rotator and search servlet as well as the shopping cart EJB. The example also shows how different network protocols can be combined&#151; HTTP to the servlet, RMI to the Enterprise JavaBean. Finally, the example shows how several technologies can be linked into one application.
</P>
<H4 ALIGN="LEFT"><A NAME="Heading5"></A><FONT COLOR="#000077">JMS Implementation</FONT></H4>
<P>MiniJMS is a small implementation of the major functionality in the Java Messaging Service. Our design was partially dictated by the requirement that we implement a client library based on the JMS interfaces. We did not, however, rely on the server-side JMS interface; instead, we used this opportunity to demonstrate a Pure Java server implementation. Messaging is usually implemented via a central server. We used this basic design, setting up connections between each client and the central server via RMI. The server also interacts with the client by publishing objects into a JNDI context. These objects represent the connection factories and destinations defined in the JMS specification.
</P>
<P>The server has connections to each running client and to a database for storing persistent messages. Our design relies on serialization to actually save the messages, but the database is used to keep track of the serialized objects and the acknowledged state for each client. This entire architecture is pictured in Figure 24.4. Although the code for MiniJMS is longer than the code for the online store and it uses as many technologies, the motivations and design decisions were somewhat easier. Networking implied RMI, persistence implied JDBC, and the JMS specification demands JNDI support.</P>
<P><A NAME="Fig4"></A><A HREF="javascript:displayWindow('images/24-04.jpg',500,361 )"><IMG SRC="images/24-04t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/24-04.jpg',500,361)"><FONT COLOR="#000077"><B>Figure 24.4</B></FONT></A>&nbsp;&nbsp;MiniJMS architecture.<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="24-02.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="24-04.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 