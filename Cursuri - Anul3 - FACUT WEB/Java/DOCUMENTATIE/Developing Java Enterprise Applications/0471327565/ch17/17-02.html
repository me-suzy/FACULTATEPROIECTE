
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=17//-->
<!--PAGES=454-457//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="17-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../ch18/18-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H4 ALIGN="LEFT"><A NAME="Heading4"></A><FONT COLOR="#000077">Control Descriptors</FONT></H4>
<P>A separate set of descriptors is provided for managing transaction control on a bean. These descriptors are discussed further in Chapter 23, &#147;Using Transactions with Enterprise JavaBeans,&#148; but are provided here for completeness in terms of the current discussion. Each of the control descriptors can be assigned to a specific method, or a default can be defined that applies to all of the methods without their own descriptor. All of the examples in Chapter 16 use a single default set of control descriptors for all methods.
</P>
<P>The first control descriptor is the transaction attribute. This determines how the bean interacts with transactions around it. For example, if a bean that uses transactions calls a method in another bean, do they share the transaction, is a new one created, or is the transaction ignored by the second bean? The second descriptor is the isolation level. This level determines what types of overlap are possibly between transactions. For example, allowing one transaction to access data uncommitted by another transaction is a specific isolation level. All of the possible values for the transaction attribute and isolation level are discussed in Chapter 23.</P>
<P>The last two control descriptors indicate the security associated with a bean. The first descriptor is called Run As Mode. The run mode of a bean can tell the server to run the bean with the identity of the client, CLIENT_IDENTITY, the identity of the server, SYSTEM_IDENTITY, or a specified identity, SPECIFIED_IDENTITY. If the identity is supposed to be specified, the Run As Identity control descriptor is used to indicate the specific java.security.Identity.</P>
<P>There is one limitation on the security control descriptors. For stateful session beans, the identity of the create method will propagate to the other methods, so they shouldn&#146;t have a conflicting descriptor. For stateless session beans and entity beans, the identity can be applied on a per-method basis.</P>
<H3><A NAME="Heading5"></A><FONT COLOR="#000077">The Deployment Process</FONT></H3>
<P>Once the deployment descriptor is created for a bean, it is placed into a jar file. This jar file contains the serialized descriptor and a manifest file that lists the descriptor and indicates that it is for an Enterprise JavaBean. The format for this manifest file is a series of sections of the form:
</P>
<!-- CODE SNIP //-->
<PRE>
Name: the name of the serialized bean file
Enterprise-Bean: True, if this file represents an EJB
</PRE>
<!-- END CODE SNIP //-->
<P>For example, the isPrime example from the CD-ROM has the following manifest file:
</P>
<!-- CODE SNIP //-->
<PRE>
Name: ejava/chapter_16/isprime/deployment/IsPrimeBeanDD.ser
Enterprise-Bean: True
</PRE>
<!-- END CODE SNIP //-->
<P>This jar file should also contain the class files for the EJB and its interfaces, although BEAWebLogic&#146;s server will allow you to simply copy the classes to BEA WebLogic&#146;s classes directory.
</P>
<P>Once the enterprise bean&#146;s jar file is created, the next step is to create the container and associated code. Each host provides a tool for this purpose. This deployment tool performs a number of operations, including creating the stub and skeleton files for your EJBHome and EJB. The tool must create the container-specific classes that implement the EJB and EJBHome interfaces before the stubs are created.</P>
<P>In many ways, this deployment tool represents the &#147;magic&#148; of Enterprise JavaBeans. It is responsible for creating all of the special code that accounts for your host&#146;s underlying network protocol and container implementation. This tool also ensures that the bean will be provided its environment variables at run time via its context. One way to think of the results of the deployment tool is as a jar file containing the bean&#146;s container. Really, the container is a combination of code in the server and the stubs and skeletons generated by this deployment tool.</P>
<P>Once you create the container, the next step is to deploy the bean. Some hosts may provide a tool for this, or it may be part of another tool. BEAWebLogic requires that you add an entry to the weblogic.properties file that indicates the name of the jar file containing the deployment information for the EJB. Other servers may provide a command-line tool or user interface for deploying the bean. Refer to your server&#146;s documentation for the exact details for this step.</P>
<H4 ALIGN="LEFT"><A NAME="Heading6"></A><FONT COLOR="#000077">The CD-ROM Examples</FONT></H4>
<P>For the examples on the CD-ROM, an NT build script based on one provided by BEAWebLogic is included. This script creates the descriptor from the descriptor file, creates the jar file, and runs the deployment/container tool. The script is also designed to copy files to the directory where you installed BEA WebLogic. Open the build.bat file and make sure that the WEBLOGICHOME variable is defined correctly if you want to use these scripts.
</P>
<P>To run the build script simply type:</P>
<!-- CODE SNIP //-->
<PRE>
build
</PRE>
<!-- END CODE SNIP //-->
<P>and the name of the example on the command line. For example, to build the isPrime example, change directory in a shell to the chapter_16 directory and type:
</P>
<!-- CODE SNIP //-->
<PRE>
&gt build isprime
</PRE>
<!-- END CODE SNIP //-->
<P>This copies the files appropriately. When the script is finished, edit the weblogic.properties file found in the root directory of your BEA WebLogic installation to include the isprime.jar file. Search for the word &#147;deploy&#148; in this file to find the correct line. By default, it is commented out and contains the jar files for all of the examples.
</P>
<H3><A NAME="Heading7"></A><FONT COLOR="#000077">Summary</FONT></H3>
<P>Because the steps for each EJB host vary, we strongly suggest that the first step you take before deploying any enterprise beans is to look at the documentation for your host, even if you are using the BEA WebLogic application server discussed here. Despite their different processes, hosts should follow the same basic steps:
</P>
<DL>
<DD><B>1.</B>&nbsp;&nbsp;Create a deployment descriptor.
<DD><B>2.</B>&nbsp;&nbsp;Store a serialized version of the descriptor in a jar file with a manifest that indicates that it is associated with an Enterprise JavaBean.
<DD><B>3.</B>&nbsp;&nbsp;Run the host&#146;s deployment/container creation tool.
<DD><B>4.</B>&nbsp;&nbsp;Tell the host to make the bean available to clients.
</DL>
<P>Whether or not a graphical tool is provided for each step, there will be some mechanism for accomplishing it and moving to the next step in this process.
</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>You should review the documentation for your server before attempting to deploy any of the examples in this book.</FONT><HR>
</BLOCKQUOTE>
<P>The next chapter discusses a larger example that uses Enterprise JavaBeans to implement a business rule. This example, like the ones from Chapter 16, &#147;Programming Enterprise JavaBeans,&#148; can be deployed to the demonstration BEA WebLogic server provided on the CD-ROM.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="17-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../ch18/18-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 