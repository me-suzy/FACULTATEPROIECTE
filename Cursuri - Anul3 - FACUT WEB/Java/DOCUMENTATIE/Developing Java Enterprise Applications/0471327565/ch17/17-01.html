
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=17//-->
<!--PAGES=451-454//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="../ch16/16-16.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="17-02.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<H2><A NAME="Heading1"></A><FONT COLOR="#000077">CHAPTER 17<BR>Deploying Enterprise JavaBeans
</FONT></H2>
<P>One of the hard parts about learning to use Enterprise JavaBeans is the fact that you have to deploy them for testing. Deployment takes time, is server dependent, and may require you to shut down your test server each time you change the bean. This is a bit more complex than using an applet or application, which you can just run. The actual steps for deploying an Enterprise JavaBean will depend on the EJB host to which you are deploying. However, there are some basic steps that all hosts require and some guidelines for what the deployment process should accomplish.
</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>Once you familiarize yourself with these basic steps, you should review the documentation for your server to determine how to deploy the beans in your environment.</FONT><HR>
</BLOCKQUOTE>
<P>The EJB specification says that all beans are deployed with a descriptor that tells the host how to treat the bean. This descriptor is an object that provides an API for learning about the programmer&#146;s intentions. Programmers package this descriptor into a jar file, then tell the host about the jar file. Again, the actual steps may vary, and some hosts may provide sophisticated tools for managing the deployment process.
</P>
<TABLE WIDTH="100%"><TD CAPTION ALIGN="LEFT" COLSPAN="2"><B>Table 17.1</B> Deployment Descriptor Attributes
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH VALIGN="TOP" ALIGN="LEFT">ATTRIBUTE
<TH VALIGN="TOP" ALIGN="LEFT">DESCRIPTION
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Access Control Entries
<TD VALIGN="TOP" ALIGN="LEFT">Security entries that indicate which users can access the bean or a particular method of the bean. You can, for example, provide a bean that everyone can access but that only managers can tell to perform a particular method.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Bean Home Name
<TD VALIGN="TOP" ALIGN="LEFT">The name that the bean will be registered under in JNDI.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Control Descriptors
<TD VALIGN="TOP" ALIGN="LEFT">Control attributes for transactions; these are discussed in detail in the text.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Enterprise Bean Class Name
<TD VALIGN="TOP" ALIGN="LEFT">The name of the Enterprise JavaBean&#146;s Class.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Environment Properties
<TD VALIGN="TOP" ALIGN="LEFT">Key-value pairs that are passed to the bean via the EJBContext&#146;s getEnvironment method.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Home Interface Name
<TD VALIGN="TOP" ALIGN="LEFT">The name of the Home interface.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Is Reentrant
<TD VALIGN="TOP" ALIGN="LEFT">This attribute applies only to entity beans and is used to define whether or not a transaction can reaccess a bean or whether a new transaction is required for each access.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT">Remote Interface Name
<TD VALIGN="TOP" ALIGN="LEFT">The name of the bean&#146;s remote interface.
<TR>
<TD COLSPAN="2"><HR>
<TR>
</TABLE>
<H3><A NAME="Heading2"></A><FONT COLOR="#000077">The DeploymentDescriptor</FONT></H3>
<P>The main information about deployment is represented by an instance of javax.ejb.deployment.DeploymentDescriptor. This class defines a set of accessor methods for setting and getting information about the bean being deployed. Rather than list the methods, Table 17.1 provides descriptions of each of the deployment descriptor attributes. In most cases, you will be setting these attributes with a tool or in a file.
</P>
<P>All of the examples on the CD-ROM include a file that contains the deployment descriptor information for the example beans. Also included is a build script for Windows NT that uses BEA WebLogic tools to generate the descriptor object from one of these files and serialize it to disk.</P>
<P>For example, the isPrime bean example has the following descriptor file. Remember that this file is BEA WebLogic specific and that other hosts may use other formats or tools. BEA WebLogic does provide a tool for creating these files as well.</P>
<!-- CODE //-->
<PRE>
(SessionDescriptor

  beanHomeName                    isprime.IsPrimeHome

  enterpriseBeanClassName         isprime.IsPrimeBean

  homeInterfaceClassName          isprime.IsPrimeHome

  remoteInterfaceClassName        isprime.IsPrime
   isReentrant                     false

  stateManagementType             STATELESS_SESSION

  sessionTimeout                  10; seconds

  ; end session EJBean-specific properties

  (accessControlEntries

  ); end accessControlEntries

  (controlDescriptors
    (DEFAULT
       isolationLevel             TRANSACTION_SERIALIZABLE
       transactionAttribute       TX_REQUIRED
       runAsMode                  CLIENT_IDENTITY
    ); end isolationLevel

  ); end controlDescriptors
  (environmentProperties

    ; Application-specific environment properties

    ; end Application&#150;specific environment properties

    maxBeansInFreePool            100

    maxBeansInCache               100

    idleTimeoutSeconds            60

  ); end environmentProperties

); end EntityDescriptor or SessionDescriptor
</PRE>
<!-- END CODE //-->
<P>Some of the properties in this file will be discussed in a moment, but notice that the file basically defines each attribute in the descriptor. To turn this file into a descriptor object, run the BEA WebLogic tool called weblogic.ejb.utils.DDCreator, which reads the file and generates a serialized object file. You can also use BEA WebLogic&#146;s DeploymentTool, pictured in Figure 17.1, which uses wizards to set each of these values and create the serialized object.
</P>
<P>Some of these properties, such as the number of beans to keep in the cache, are BEA WebLogic specific. Other hosts may provide their own special settings as part of the bean&#146;s standard environment properties.</P>
<H4 ALIGN="LEFT"><A NAME="Heading3"></A><FONT COLOR="#000077">Session- and Entity-Specific Descriptors</FONT></H4>
<P>Both session and entity beans actually use a subclass of DeploymentDescriptor for their deployment information. Session beans use an instance of SessionDescriptor, which adds a few attributes to the generic set.
</P>
<P><A NAME="Fig1"></A><A HREF="javascript:displayWindow('images/17-01.jpg',609,451 )"><IMG SRC="images/17-01t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/17-01.jpg',609,451)"><FONT COLOR="#000077"><B>Figure 17.1</B></FONT></A>&nbsp;&nbsp;The WebLogic EJB deployment tool.</P>
<P>First, session beans have a time-out. The time-out indicates how long the session should be held open by the server, even if the client and server have not communicated. For example, if the time-out is 10 minutes, and the person using the client goes to lunch, the session will end in the person&#146;s absence. This value can be important when the session bean is performing sensitive operations and you don&#146;t want to leave the session open for extended periods of time.
</P>
<P>The second session-specific descriptor is its management type. This value is either stateless or stateful, indicating the session beans type. Entity beans use an instance of EntityDescriptor, which adds a few attributes to the generic set. First, entity beans must indicate which of their fields, if any, are container-managed. By indicating a field in this list, the bean is stating that it will not manage persistence of that field and expects the container to do so. Second, the entity bean must define a primary key class name. This is the name for the class of object used to identify the entity beans in the server. Normally, this is a custom class, as discussed in Chapter 16, &#147;Programming Enterprise JavaBeans.&#148;</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="../ch16/16-16.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="17-02.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 