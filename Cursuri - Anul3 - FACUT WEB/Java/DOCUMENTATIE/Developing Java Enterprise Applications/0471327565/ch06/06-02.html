
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=06//-->
<!--PAGES=136-141//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="06-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="06-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>Here is what a CGI program written in Perl might look like:
</P>
<!-- CODE //-->
<PRE>
#!/usr/bin/perl


require &#147;cgilib.pl&#148;;

print &#147;Content-type: text/html\n\n&#148;;

%dataDict = ();

&ampreadData(*data);
&ampparseData(*data,*dataDict);

$fName = $dataDict{&#147;fname&#148;};
$chp = $dataDict{&#147;favchap&#148;};
$writeServlet = $dataDict{&#147;writeservlet&#148;};

print &#147;&ltHTML&gt&#148;;
print &#147;&ltTITLE&gtBook Review Response&lt/TITLE&gt&#148;;
print $fName;
print &#147;, thank you for your feedback.&ltBR&gt&#148;;
print &#147;Your favorite chapter so far is chapter &#148;;
print $chp;
print &#147;.&ltBR&gt&#148;;
print &#147;&ltHR&gt&#148;;
print &#147;You are &#148;;

($writeServlet ne &#147;&#148;) || print &#147;not &#148;;

print &#147;planning to write a servlet.&#148;;

print &#147;&lt/HTML&gt&#148;;
</PRE>
<!-- END CODE //-->
<P><A NAME="Fig2"></A><A HREF="javascript:displayWindow('images/06-02.jpg',640,788 )"><IMG SRC="images/06-02t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/06-02.jpg',640,788)"><FONT COLOR="#000077"><B>Figure 6.2</B></FONT></A>&nbsp;&nbsp;Resulting Web page after form is processed.</P>
<P><A NAME="Fig3"></A><A HREF="javascript:displayWindow('images/06-03.jpg',454,420 )"><IMG SRC="images/06-03t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/06-03.jpg',454,420)"><FONT COLOR="#000077"><B>Figure 6.3</B></FONT></A>&nbsp;&nbsp;Three-tier Web application architecture.</P>
<P>Although the code for these programs may look complex, it is actually quite simple. A Web client sends a set of key-value pairs to the Web server, which forwards the data to the script named in the &ltFORM&gt tag. The CGI program processes these values and writes HTML or other information back to the Web server. In the middle of this process, the CGI program may write to a log file or access a database or other server resource. Figure 6.3 illustrates what this three-tier architecture looks like.
</P>
<H3><A NAME="Heading4"></A><FONT COLOR="#000077">Processing Forms with Servlets</FONT></H3>
<P>When Java came on the scene, applets allowed Web browsers to display even more sophisticated user interfaces in a platform-independent way. Just as applets extend the capabilities of a Web browser, servlets extend the capabilities of Web servers. Servlets can be used as replacements for CGI programs or as plug-ins within JavaSoft&#146;s JavaWeb Server and other Web servers supporting the Servlet API.
</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>The JavaWeb Server packages also come with plug-in support for popular Web servers such as Netscape, Microsoft, and Apache. This means you can write a servlet and have it treated as a vendor-specific plug-in by these Web servers.</FONT><HR>
</BLOCKQUOTE>
<P>Like most Java technologies, servlets are portable and should work on any &#147;servlet-enabled&#148; server. Because the servlet API is a standard, any server that supports servlets should support your servlet. This is a huge advantage over CGI and other server-side technologies. As more and more servers support servlets, the decision of which server you use will not affect the design and implementation decisions you make for building your enterprise application&#146;s server logic.
</P>
<P>In CGI programming, a server sends a request to a CGI program, which starts up, processes the request, and shuts down. Because the CGI program doesn&#146;t remain &#147;open&#148; between requests, resources it uses, such as database connections, must be reestablished between calls. This is a performance bottleneck and often requires more complex programming logic to work around. Unlike CGI programs, servlets are persistent. A database connection created in a servlet can remain open between server requests, greatly enhancing performance.</P>
<P>Both servlets and CGI can be used to write small applications that perform specific tasks. One advantage of CGI is that CGI scripts can be written in almost any language. The disadvantage of CGI is that each time the server needs the services of one of your CGI programs, it must start up a new CGI process. This process has no persistent state unless you write the logic for storing it. For example, if you wanted to keep track of the last credit card processed, you would need to write it to a file or a database of some sort. This means every time a request is made of your CGI program, the Web server must start an instance of your program, then the program must load its state from a file, database, and so on. Also, CGI does not manage the communication between multiple instances of the CGI program, so if multiple clients are accessing your Web server and requesting the CGI, multiple instances of the CGI program must be loaded, taking up memory. These multiple instances will not share state, so you will have to write specific code if you want them to communicate. In other words, CGI programs are represented by multiple single-threaded applications by default. This is one reason that servlets are a good choice for Web server application programming. They do not have these limitations. Servlets are loaded into the server&#146;s address space at load time or at the time of the initial request. After the initial request, they respond very quickly. Also, because the servlet can remain resident, it can maintain state between client requests. Figure 6.4 illustrates typical servlet use.</P>
<H4 ALIGN="LEFT"><A NAME="Heading5"></A><FONT COLOR="#000077">Creating a Servlet</FONT></H4>
<P>In order to create servlets, use the Java Servlet Development Kit, or JSDK, from Sun. The JSDK consists of two packages: javax.servlet and javax.servlet.HTTP. These packages contain the classes and interfaces needed to create your own servlets. Your Web server might also provide a copy of these packages; if so, you don&#146;t have to download this kit. JSDK 2.0 is found on your CD-ROM or it can be downloaded from <A HREF="http://java.sun.com/products/java-server/servlets/index.html">http://java.sun.com/products/java-server/servlets/index.html</A>. After installing the JSDK, you can begin creating servlets.</P>
<P><A NAME="Fig4"></A><A HREF="javascript:displayWindow('images/06-04.jpg',471,420 )"><IMG SRC="images/06-04t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/06-04.jpg',471,420)"><FONT COLOR="#000077"><B>Figure 6.4</B></FONT></A>&nbsp;&nbsp;Web application architecture with servlets.</P>
<P>The following discussion provides a brief overview of the major concepts in creating servlets. Chapter 7, &#147;Programming Servlets,&#148; covers these concepts in detail and provides a number of demonstrations.
</P>
<P><FONT SIZE="+1"><B><I>GenericServlet</I></B></FONT></P>
<P>Remember, when you create an applet, you typically subclass java.applet.Applet. With servlets that aren&#146;t specifically used for HTTP processing, you subclass javax.servlet.GenericServlet and override several methods. Typically, you will override init(), which performs any initialization your servlet requires, such as initializing logs, opening database connections, and so on. You will also usually override service(), which is called each time your servlet is invoked. When this method is called, it is passed a javax.servlet.ServletRequest and javax.servlet.ServletResponse object, used to process the client request.
</P>
<P><FONT SIZE="+1"><B><I>HTTPServlet</I></B></FONT></P>
<P>If your servlet will be used primarily for processing HTTP requests, subclass javax.servlet.HTTP.HTTPServlet. This abstract subclass of GenericServlet implements a default service() method for processing requests. It calls several other methods that you typically override to handle the request. The most common methods to override include doGet() and doPost(). For example, the method doGet() is called when the form requests are sent in GET, HEAD, or POST format. Each of these request types corresponds to a standard HTTP request mechanism and is passed objects that represent the request and the response.
</P>
<P>The two most common request types are GET and POST. A GET request sends information to a servlet using a URL. The results of the GET request should be the contents of the URL. The URL can contain extra data in the form of a query string appended to it with a question mark. For example, the URL <A HREF="www.pri.com/servlets/go?name=stephen">www.pri.com/servlets/go?name=stephen</A> passes the key-value pair name=stephen to a servlet. This key-value string is optional, and most of the requests you make with a browser when clicking on links are actually handled with GET requests to the server that do not contain this query string. POST requests send an HTTP body that contains all of the data being sent to the servlet. Normally, POST requests are used as the action for a form, especially when a lot of data is being sent to the servlet or CGI script.</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="06-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="06-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 