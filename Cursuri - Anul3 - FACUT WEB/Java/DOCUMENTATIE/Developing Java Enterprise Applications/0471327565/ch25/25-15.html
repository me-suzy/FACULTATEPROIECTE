
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=25//-->
<!--PAGES=672-673//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="25-14.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../ch26/26-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>The ShoppingCartBean expects its JDBC information to be provided as environmental properties. With the BEAWebLogic server, we actually created a pool in the weblogic.properties file. To create the pool, the two entries were added to the properties file. The first entry is long, so the \ character is used to indicate that it continues for several lines. The second entry fits on a single line.
</P>
<!-- CODE //-->
<PRE>
weblogic.jdbc.connectionPool.CartPool=\
        url=jdbc:odbc:Cart,\
       driver=sun.jdbc.odbc.JdbcOdbcDriver,\
       initialCapacity=1,\
       maxCapacity=2,\
       capacityIncrement=1,\
       props=user=none;password=none;server=none

# Add an ACL for the connection pool:
weblogic.allow.reserve.weblogic.jdbc.connectionPool.CartPool=guest
</PRE>
<!-- END CODE //-->
<P>This pool refers to the ODBC data source. The bean is configured to use BEAWebLogic&#146;s JTS JDBC driver. This driver fronts the connection messages and supports the use of connection pools. It also supports any JTS calls that are used within the EJB. In our WebLogic deployment descriptor, the following lines are used to make this assignment:
</P>
<!-- CODE SNIP //-->
<PRE>
    driver       weblogic.jdbc.jts.Driver
     url          jdbc:weblogic:jts:CartPool
    logserver    192.168.0.170
</PRE>
<!-- END CODE SNIP //-->
<P>Finally, the CD-ROM contains a manifest file for use in creating the EJB jar file.
</P>
<P>Once you get the servlets, database, and bean installed, you can access the store with a Web browser by going to the stores home page index.jhtml. You may also want to access the InventoryServlet directly to keep an eye on the database as you make purchases. Check the BuildDB script for information on who is a registered customer and how much credit customers have. These values are stored in static arrays that you can edit as needed before building the database.</P>
<H3><A NAME="Heading14"></A><FONT COLOR="#000077">Summary</FONT></H3>
<P>This example combined a number of the frameworks discussed in this book. Servlets and JavaServer Pages were used to display information to the user. Enterprise JavaBeans were used to implement the business logic, and JBDC was used to access a database. Communication between the servlets and EJB was managed via JNDI. As you may have guessed, most enterprise applications use a number of technologies. Almost all of the enterprise APIs are designed to rely on JNDI as the finding and naming API. All database access is managed with JDBC, and most enterprise applications use databases.
</P>
<P>Some of the main lessons we hope you learn from this example are:</P>
<DL>
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Pay special attention during the design stage to the mechanism that you choose for creating Web pages.</B> Are you using dynamic pages for everything, even if you don&#146;t need to? Depending on your resources, this may be okay, but it does cost Web server time and possibly database time, and that means money. Of course, some sites have to use dynamic HTML, and they should. In this case, use servlets or JSPs that fall into specific categories. For example, this store could have used three servlets for the Web pages: one for the home page, one for category pages, and one for all of the item pages. This keeps the server from having to load too many servlets, and it possibly allows some caching in the servlet&#146;s instance variables.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>In the &#147;Do as we say, not as we do&#148; category: Don&#146;t put too much responsibility on a single object.</B> In a larger program, we would not have made the ShoppingCartBean handle the inventory request. This should be handled by another bean. The ShoppingCartServlet could also be split into separate servlets for displaying the cart, confirming the cart, and making the purchase. In this case, we split servlets to improve maintenance, but this choice should be balanced against resource usage. We broke these guidelines for educational purposes, but that doesn&#146;t mean you should, too.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Maximize the advantages of an Application Server.</B> The ShoppingCart bean uses the server&#146;s connection pools, allowing it to minimize the database connection times and optimize resource usage.
<DD><B>&#149;</B>&nbsp;&nbsp;<B>Reuse servlets and beans across applications when possible.</B> We duplicated the search servlet to make this example self-contained, but we could have easily referenced the existing one. The same is true of the AdRotatorServlet. In large installations, think about grouping a single type of functionality into a single servlet or bean. Reuse the functionality on this scale, taking advantage of the already tested nature of the installation and code.
</DL>
<P>The next chapter discusses another large example. This one, called MiniJMS, is a partial implementation of the JMS specification. In the same way that the example in this chapter used servlets and EJBs, MiniJMS uses JNDI, JDBC, RMI, and JMS, combining them into a complete, integrated example.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="25-14.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="../ch26/26-01.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 