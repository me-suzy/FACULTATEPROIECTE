
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=25//-->
<!--PAGES=658-660//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="25-10.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="25-12.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>The main code for this method is highlighted to separate it from the simple output of HTML. Like the error message page, this one contains a link back to the referer if one is provided.
</P>
<!-- CODE //-->
<PRE>
    protected void outputCart(Hashtable cart
                                 ,PrintWriter out
                                ,String requestURL
                                ,String referer)
    {
        ShoppingCartItem item;
        Enumeration items;
        float total=0;
        
<B>        items = cart.elements();</B>
        
        out.println(&#147;&ltHTML&gt&#148;);
        out.println(&#147;&ltHEAD&gt&#148;);
        out.println(&#147;&ltTITLE&gt&#148;);
        out.println(&#147;Shopping Cart&#148;);
        out.println(&#147;&lt/TITLE&gt&#148;);
        out.println(&#147;&lt/HEAD&gt&#148;);
        out.println(&#147;&ltBODY TEXT=\&#148;#000000\&#147; BGCOLOR=\&#148;#FFFFFF\&#147;&#148;);
        out.println(&#147; LINK=\&#148;#FF0000\&#147; VLINK=\&#148;#800080\&#147;&gt&#148;);
        out.println(&#147;&ltCENTER&gt&#148;);
        out.println(&#147;&ltTABLE WIDTH=500 BORDER=0&gt&#148;);
        out.println(&#147;&ltTR&gt&#148;);
        out.println(&#147;&ltTD&gt&#148;);
        
        out.println(&#147;&ltCENTER&gt&ltH1&gtShopping Cart&lt/H1&gt&lt/CENTER&gt&#148;);
        out.println(&#147;Your shopping cart contains the following items:&ltBR&gt&#148;);
        out.println(&#147;&ltTABLE&gt&#148;);
        out.println(&#147;&ltTR&gt&#148;);
        out.println(&#147;&ltTH&gtDescription&lt/TH&gt&#148;);
        out.println(&#147;&ltTH&gtQuantity&lt/TH&gt&#148;);
        out.println(&#147;&ltTH&gtPrice&lt/TH&gt&#148;);
        out.println(&#147;&ltTH&gtTotal&lt/TH&gt&#148;);
        out.println(&#147;&ltTH&gt&lt/TH&gt&#148;);
        out.println(&#147;&lt/TR&gt&#148;);
        
<B>        while((items!=null)&amp&amp(items.hasMoreElements()))
        {
            item = (ShoppingCartItem) items.nextElement();
        
            outputItem(item,out,requestURL,referer);
        
            total += item.getTotal();
        }</B>
        
        out.println("&ltTR&gt");
        out.println("&ltTD&gt&lt/TD&gt");
        out.println("&ltTD&gt&lt/TD&gt");
        out.println("&ltTD&gt&ltB&gtTotal&lt/B&gt&lt/TD&gt");
        out.print("&ltTD&gt&ltB&gt");
<B>        out.print(formatter.format(total));</B>
        out.println("&lt/B&gt&lt/TD&gt");
        out.println("&ltTD&gt&lt/TD&gt");
        out.println("&lt/TR&gt");

        out.println("&lt/TABLE&gt");
        
        out.println("&ltBR&gt&ltP ALIGN=Right&gt");
        out.print("&ltFORM ACTION=\"");
        out.print(requestURL);
        out.println("\" METHOD=\"GET\"&gt");
        
        out.println("&ltINPUT TYPE=\"SUBMIT\" NAME=\"action\" VALUE=\"Purchase\"&gt");
        
        out.println("&lt/FORM&gt");
        out.println("&lt/P&gt");
        
        if((referer!=null)&amp&amp(referer.length()&gt0))
        {
            out.print("&ltCENTER&gt&ltH4&gt&ltA HREF=\"");
            out.print(referer);
            out.print("?referer=");
            out.print(referer);
            out.println("\"&gtBack&lt/A&gt&lt/H4&gt&lt/CENTER&gt");
        }
        
        out.println("&lt/TD&gt");
        out.println("&lt/TR&gt");
        out.println("&lt/TABLE&gt");
        out.println("&lt/CENTER&gt");
        out.println("&lt/BODY&gt");
        out.println("&lt/HTML&gt");
        out.close();
    }
</PRE>
<!-- END CODE //-->
<P>The outputItem method outputs a form containing a single HTML table row. This row includes the description, price, and quantity for a ShoppingCartItem as well as the total price for all of the items of this type ordered. Hidden fields are used when necessary to pass data back to the servlet. The value of the Submit button is used to tell the servlet which action is being requested between delete and adjust.
</P>
<!-- CODE //-->
<PRE>
    protected void outputItem(ShoppingCartItem item
                                 ,PrintWriter out
                                ,String act
                                ,String referer)
    {
        out.print(&#147;&ltFORM ACTION=\&#148;&#147;);
        out.print(act);
        out.println(&#147;\&#148; METHOD=\&#147;GET\&#148;&gt&#147;);
        out.println(&#147;&ltTR&gt&#148;);
        out.print(&#147;&ltTD&gt&#148;);
        out.print(item.desc);
        out.println(&#147;&lt/TD&gt&#148;);
        out.print(&#147;&ltTD&gt&ltINPUT TYPE=\&#148;TEXT\&#147; &#148;
                    +&#147;NAME=\&#148;quantity\&#147; VALUE=\&#148;&#147;);
        out.print(item.quantity);
        out.println(&#147;\&#148; SIZE=3&gt&lt/TD&gt&#147;);
        out.print(&#147;&ltTD&gt&#148;);
        out.print(formatter.format(item.price));
        out.println(&#147;&lt/TD&gt&#148;);
        out.print(&#147;&ltTD&gt&#148;);
        out.print(formatter.format(item.getTotal()));
        out.println(&#147;&lt/TD&gt&#148;);
        
        //Output the change form buttons and hidden fields
        out.println(&#147;&ltTD&gt&#148;);
        
        out.print(&#147;&ltINPUT TYPE=\&#148;HIDDEN\&#147; NAME=\&#148;item\&#147; VALUE=\&#148;&#147;);
        out.print(item.desc);
        out.println(&#147;\&#147;&gt&#148;);
        out.print(&#147;&ltINPUT TYPE=\&#148;HIDDEN\&#147; NAME=\&#148;price\&#147; VALUE=\&#148;&#147;);
        out.print(item.price);
        out.println(&#147;\&#147;&gt&#148;);
        out.print(&#147;&ltINPUT TYPE=\&#148;HIDDEN\&#147; &#148;
                         +&#147;NAME=\&#148;referer\&#147; VALUE=\&#148;&#147;);
        out.print(referer);
        out.println(&#147;\&#147;&gt&#148;);
        
        out.println(&#147;&ltINPUT TYPE=\&#148;SUBMIT\&#147; &#148;
                          +&#147;NAME=\&#148;action\&#147; VALUE=\&#148;Adjust\&#147;&gt&#148;);
        out.println(&#147;&ltINPUT TYPE=\&#148;SUBMIT\&#147; &#148;
                          +&#147;NAME=\&#148;action\&#147; VALUE=\&#148;Delete\&#147;&gt&#148;);
        
        out.println(&#147;&lt/TD&gt&#148;);
        
        out.println(&#147;&lt/TR&gt&#148;);
        
        out.println(&#147;&lt/FORM&gt&#148;);
    }
</PRE>
<!-- END CODE //-->
<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="25-10.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="25-12.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 