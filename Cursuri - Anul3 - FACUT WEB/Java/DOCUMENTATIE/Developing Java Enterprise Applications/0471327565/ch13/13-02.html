
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=13//-->
<!--PAGES=327-330//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="13-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="13-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<P>RMI obviously requires network connectivity. In Java, connections to the network are controlled by a SecurityManager. This manager also restricts class loading and access to other resources. Non-applet Java code that plans to use RMI must set the systemwide security manager to a class that supports RMI. The java.rmi.RMISecurityManager is the default choice for this operation. To set the security manager, use the following line of code:
</P>
<!-- CODE SNIP //-->
<PRE>
System.setSecurityManager(new RMISecurityManager());
</PRE>
<!-- END CODE SNIP //-->
<P>Java 2 introduces a new policy-based security system. By default, application-specific code is not allowed to access resources without specific permission. This permission is provided by either editing the default JDK properties or providing a policy file. Here is a simple policy used for the examples in this chapter:
</P>
<!-- CODE //-->
<PRE>
grant
{
    permission java.net.SocketPermission &#147;*:1024-65535&#148;
                      , &#147;connect,accept&#148;;
    permission java.lang.RuntimePermission
                        &#147;setSecurityManager&#148;;
    permission java.lang.RuntimePermission
                        &#147;createSecurityManager&#148;;
};
</PRE>
<!-- END CODE //-->
<P>This policy file allows the programs to create and set the RMI security manager as well as connect to and accept connections on all of the ports from 1024 to 65535. The policy-based security provided in Java 2 is very powerful but will require some relearning on the part of application programmers who are not accustomed to security restraints.
</P>
<P>To activate the custom security policy, you need to set the system property called java.security.policy. The value of this property is used to load an additional security policy file into the system, appending it to the existing policies.</P>
<P>This property can be set as a flag to the java interpreter. For example:</P>
<!-- CODE SNIP //-->
<PRE>
java -Djava.security.policy=server.policy server.Server
</PRE>
<!-- END CODE SNIP //-->
<P>runs java on the server.Server class with the policy file named server.policy.
</P>
<BLOCKQUOTE>
<P><FONT SIZE="-1"><HR><B>NOTE:&nbsp;&nbsp;</B>For more information on security with Java 2, check out <A HREF="http://java.sun.com/products/jdk/1.2/docs/guide/security">http://java.sun.com/products/jdk/1.2/docs/guide/security</A>.
</FONT><HR>
</BLOCKQUOTE>
<P>Once connected, the client can send messages to the server. However, remote messaging can generate network-specific exceptions. For example, the network could go down or the server machine could be unplugged, resulting in an error on the client&#146;s side. In some sense, the possibility of these non-local exceptions is the only difference between using an RMI object and using a local one. However, don&#146;t underestimate the difference network programming can make in your projects; it can be significant.
</P>
<P>A list of the exceptions that a client may have to deal with when using a remote object is provided in Table 13.2. In addition to these RMI-specific exceptions, the client may also have to deal with custom exceptions thrown by the server.</P>
<TABLE WIDTH="100%"><TD CAPTION ALIGN="LEFT" COLSPAN="2"><B>Table 13.2</B> RMI Client Exceptions
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH VALIGN="TOP" ALIGN="LEFT" WIDTH="35%">EXCEPTION CLASS
<TH VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">MEANING
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.AccessException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Indicates that a message was sent that the caller does not have permission to execute.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.ConnectException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">The requested connection was refused.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.ConnectIOException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">An I/O exception was thrown while making the network connection.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.MarshalException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">An I/O exception occurred while sending a message that was related to packaging up the message. This exception may occur even if the message got through.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.NoSuchObjectException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">The server object is no longer available, making the stub invalid.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.NotBoundException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">The client attempted to access a server object that was not registered.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.RemoteException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Common superclass for RMI exceptions.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.RMISecurityException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Deprecated exception class previously used for security exceptions during RMI. Unused in Java 2.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.ServerError</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Indicates that a message sent by the client caused the server to throw an error.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.ServerException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Indicates that a message sent by the client caused the server to throw an exception.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.ServerRuntimeException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Deprecated class indicating that a message sent by the client caused the server to throw an exception. Unused in Java 2.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.StubNotFoundException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">The class file for a stub could not be found.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.UnexpectedException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">Wraps an exception thrown by the server that is not one of the exception types declared in the remote interface.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.net.UnknownHostException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">The client is unable to find the requested host.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="35%"><SMALL>java.rmi.UnmarshalException</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT" WIDTH="55%">An exception occurred while either the server was unmarshalling the parameters for a message or the client was unmarshalling the return value.
<TR>
<TD COLSPAN="2"><HR>
</TABLE>
<P>Most of the exceptions from Table 13.2 extend the RemoteException class. Clients that want to distinguish remote- from application-specific exceptions can use these classes in a try-catch block to handle all RMI-related issues. RemoteException objects have an instance variable called detail that may contain another throwable object indicating the actual problem. For example, the ServerError exception will contain the error that occurred.
</P>
<H4 ALIGN="LEFT"><A NAME="Heading4"></A><FONT COLOR="#000077">RMI on the Server</FONT></H4>
<P>Creating an RMI server is a three-step process. First, you must implement the remote interface. Second, the server may need to configure the RMI libraries. Finally, you must register the server and make it accessible to clients.
</P><P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="13-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="13-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 