
<SCRIPT>
<!--
function displayWindow(url, width, height) {
        var Win = window.open(url,"displayWindow",'width=' + width +
	',height=' + height + ',resizable=1,scrollbars=yes');
	}
	//-->
	</SCRIPT>



<FONT FACE="Arial,Helvetica" SIZE="-1">
To access the contents, click the chapter and section titles.
</FONT>
<P>
<B>Developing Java Enterprise Applications</B>
<FONT SIZE="-1">
<BR>
<I>(Publisher: John Wiley & Sons, Inc.)</I>
<BR>
Author(s): Stephen Asbury ; Scott R. Weiner
<BR>
ISBN: 0471327565
<BR>
Publication Date: 02/01/99
</FONT>
<P>
<Script language="JavaScript">
function isIE4() 
{
    return( navigator.appName.indexOf("Microsoft") != -1 && (navigator.appVersion.charAt(0)=='4') );
 }
function bookMarkit()
{
        var url="http://www.itknowledge.com/PSUser/EWBookMarks.html?url="+window.location+"&isbn=0";
	parent.location.href=url;
        //var win = window.open(url,"myitk");
        //if(!isIE4())
        //       win.focus();

}
</Script>
<a href="javascript:bookMarkit();"><img src="/images/bookmarkit.gif" border=0 alt="Bookmark It" width=97 height=23></a>

<P>
<form name="Search" method="GET" action="http://search.earthweb.com/search97/search_redir.cgi">

<INPUT TYPE="hidden" NAME="Action" VALUE="Search">
<INPUT TYPE="hidden" NAME="SearchPage" VALUE="http://search.earthweb.com/search97/samples/forms/srchdemo.htm">
<INPUT TYPE="hidden" NAME="Collection" VALUE="ITK">
<INPUT TYPE="hidden" NAME="ResultTemplate" VALUE="itk-simple-intrabook.hts">
<INPUT TYPE="hidden" NAME="ViewTemplate" VALUE="view.hts">

<font face="arial, helvetica" size=2><b>Search this book:</b></font><br>
<INPUT NAME="queryText" size=50 VALUE="">&nbsp;<input type="submit" name="submitbutton" value="Go!">
<INPUT type=hidden NAME="section_on" VALUE="on">
<INPUT type=hidden NAME="section" VALUE="http://www.itknowledge.com/reference/standard/0471327565/">

</form>


<!-- Empty Reference Subhead -->

<!--ISBN=0471327565//-->
<!--TITLE=Developing Java Enterprise Applications//-->
<!--AUTHOR=Stephen Asbury//-->
<!--AUTHOR=Scott R. Weiner//-->
<!--PUBLISHER=Wiley Computer Publishing//-->
<!--CHAPTER=26//-->
<!--PAGES=678-680//-->
<!--UNASSIGNED1//-->
<!--UNASSIGNED2//-->

<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="26-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="26-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>
<P><BR></P>
<TABLE WIDTH="100%">
<TD CAPTION COLSPAN="2" ALIGN="LEFT"><B>Table 26.2</B> RemoteMiniSession Methods
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TH WIDTH="35%" ALIGN="LEFT">METHOD
<TH ALIGN="LEFT">DESCRIPTION
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void seTransacted(boolean tf) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Tells the remote session whether it is transacted.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public RemoteMiniSession close() throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Closes the remote session, freeing resources.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public Queue createQueue(String queueName) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Creates a new queue with the provided name or throws an exception if the queue exists.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public Topic createTopic(String topicName) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Creates a new topic with the provided name or throws an exception if the topic exists.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void deleteDestination(String name) JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Deletes a destination from the system, ultimately deleting all of the messages throws RemoteException, associated with the destination.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void send(Message message) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Sends a message to the MiniJMS server.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void setClient(MiniClientSession client) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Passes the client session to the server for notification of messages being received.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void commit() throws RemoteException,JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Commits the received and sent messages. (See Chapter 20, &#147;Programming with the Java Messaging Service,&#148; for a discussion on commit, rollback, and recover.)
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void rollback() throws RemoteException,JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Rolls back the session&#146;s transactions.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void recover() throws RemoteException,JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Recovers the session&#146;s transaction.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void acknowledge(Destination d, String name) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Acknowledges the messages for a specific destination and name. This name might be the username that was passed to create the connection.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void registerFor(Destination dest, boolean durable, String name) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP" ALIGN="LEFT">Internal method used to tell the server that the session has created a consumer for a particular destination. The name of the consumer is provided, and a flag indicates whether it is durable.
<TR>
<TD COLSPAN="2"><HR>
<TR>
<TD VALIGN="TOP" ALIGN="LEFT"><SMALL>public void unregisterFor(Destination dest,String name) throws RemoteException, JMSException;</SMALL>
<TD VALIGN="TOP">Tells the server that a consumer was closed, possibly stopping further delivery of messages with this destination to this client, if no more consumers remain.
<TR>
<TD COLSPAN="2"><HR>
<TR>
</TABLE>
<P>Notice that one of the remote session&#146;s methods is used to create a relationship between the server and the client. The setClient method takes a MiniClientSession as an argument. MiniClientSession is an interface, defined in the following code, implemented by the Session object used by the client. This interface defines the single addMessage method used by the server to notify the client of messages being sent to it.
</P>
<!-- CODE SNIP //-->
<PRE>
public interface MiniClientSession extends java.rmi.Remote
{
      public void addMessage(Message m)
              throws RemoteException;
}
</PRE>
<!-- END CODE SNIP //-->
<P>The methods in this interface are the key protocol between the client and the server. The concepts of registering for a destination, sending, and receiving are used extensively in the client library.
</P>
<H3><A NAME="Heading4"></A><FONT COLOR="#000077">The Client Library</FONT></H3>
<P>All of the code that a JMS client needs is provided in the minijms package. This includes all of the classes with which the client interacts as specified by the JMS specification. The generic versions of these classes and their relationships with each other are pictured in Figure 26.2.
</P>
<P>Figure 26.2 does not show the specific classes for managing queues and topics; instead, the complete mapping between the specification and MiniJMS is described in Table 26.3. This table hints at one of the design techniques used in MiniJMS to simplify the code. In several cases, more than one of the JMS types are implemented by a single MiniJMS class. For example, MiniDestination implements Destination, Queue, and Topic.</P>
<P>The message types are not included in this table; they are discussed later in this chapter. Basically, MiniJMS implements each message type in its own class.</P>
<P><A NAME="Fig2"></A><A HREF="javascript:displayWindow('images/26-02.jpg',500,338 )"><IMG SRC="images/26-02t.jpg"></A>
<BR><A HREF="javascript:displayWindow('images/26-02.jpg',500,338)"><FONT COLOR="#000077"><B>Figure 26.2</B></FONT></A>&nbsp;&nbsp;MiniJMS Client classes.<P><BR></P>
<CENTER>
<TABLE BORDER>
<TR>
<TD><A HREF="26-01.html">Previous</A></TD>
<TD><A HREF="../ewtoc.html">Table of Contents</A></TD>
<TD><A HREF="26-03.html">Next</A></TD>
</TR>
</TABLE>
</CENTER>


<!-- 