drop table stud_lb_straine;
drop table stud_soft;
drop table studenti;
drop table useri;

CREATE TABLE useri(
 username VARCHAR2(20)
       CONSTRAINT pk_useri PRIMARY KEY
       CONSTRAINT nn_useri_username NOT NULL
,grup VARCHAR2(9)
      CONSTRAINT ck_useri_grup CHECK (grup IN('Profesori','Studenti'))
 ,password NUMBER(25)
);

CREATE TABLE studenti(
   username VARCHAR2(20)
       CONSTRAINT pk_studenti PRIMARY KEY
       CONSTRAINT nn_studenti_username NOT NULL
       CONSTRAINT fk_studenti_useri REFERENCES useri(username)
   ,nume VARCHAR2(20)   
       CONSTRAINT ck_studenti_nume CHECK(nume=LTRIM(INITCAP(nume)))
   ,prenume VARCHAR2(20)
       CONSTRAINT ck_studenti_prenume CHECK(prenume=LTRIM(INITCAP(prenume)))
   ,annastere NUMBER(4)       
       CONSTRAINT ck_studenti_annastere CHECK
             (annastere BETWEEN 1960 AND 2010)
   ,lunanastere VARCHAR2(10)
       CONSTRAINT ck_studenti_lunanastere CHECK(lunanastere IN('Ianuarie','Februarie','Martie','Aprilie','Mai','Iunie','Iulie','August','Septembrie','Octombrie','Noiembrie','Decembrie'))
   ,zinastere NUMBER(2)
      CONSTRAINT ck_studenti_zinastere CHECK(zinastere BETWEEN 1 AND 31)
   ,adrstabila VARCHAR2(40)
   ,adrflotanta VARCHAR2(40)
   ,telfix NUMBER(30)
   ,telmobil NUMBER(30)
   ,CNP NUMBER(13)
   ,sex CHAR(1)
      CONSTRAINT ck_studenti_sex CHECK(sex IN ('M','F'))
   ,starecivila VARCHAR2(11)
      CONSTRAINT ck_studenti_starecivila CHECK(starecivila IN('casatorit','necasatorit','divortat'))
   ,stagiumilitar VARCHAR2(13)
      CONSTRAINT ck_studenti_stagiumilitar CHECK(stagiumilitar IN('satisfacut','nesatisfacut','nu e cazul'))
   ,e_mail VARCHAR2(40)
   ,hobby VARCHAR2(50)
   ,salminim NUMBER(5)
        CONSTRAINT ck_studenti_salminim CHECK(salminim>0)
  ,permiscat VARCHAR2(15)
  ,altestudii VARCHAR2(50)
  ,stagiistrain VARCHAR2(50)
  ,activitextrasc VARCHAR2(50)
  ,foto BLOB
);


CREATE TABLE stud_soft(
 username VARCHAR2(20)
     CONSTRAINT fk_stud_soft_studenti REFERENCES studenti(username)
 ,nivel VARCHAR2(9)
     CONSTRAINT ck_stud_soft_nivel CHECK(nivel IN('avansat','mediu','incepator'))
 ,densoft VARCHAR2(15)
 ,categorie VARCHAR2(20)
      CONSTRAINT ck_stud_soft_categorie CHECK(categorie IN('Baze de date','Medii de dezvoltare','Aplicatii WEB'))
 ,CONSTRAINT pk_stud_soft PRIMARY KEY(username, densoft)
);

CREATE TABLE stud_lb_straine(
  numelimba VARCHAR2(15)
    CONSTRAINT pk_stud_lb_straine PRIMARY KEY
    CONSTRAINT nn_stud_lb_straine_numelimba NOT NULL
 ,username VARCHAR2(20)
     CONSTRAINT fk_stud_lb_straine_studenti REFERENCES studenti(username)
 ,scris VARCHAR2(9)
    CONSTRAINT ck_stud_lb_straine_scris CHECK(scris IN('avansat','mediu','incepator'))
 ,citit VARCHAR2(9)
    CONSTRAINT ck_stud_lb_straine_citit CHECK(citit IN('avansat','mediu','incepator'))
 ,vorbit VARCHAR2(9)
    CONSTRAINT ck_stud_lb_straine_vorbit CHECK(vorbit IN('avansat','mediu','incepator'))
);


